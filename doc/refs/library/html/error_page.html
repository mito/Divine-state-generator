<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>DiVinE: Error Handling Unit</title>
<link href="main.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="error_page">Error Handling Unit </a></h1><h2><a class="anchor" name="EHU_Overview">
Overview</a></h2>
Error Handling Unit is a unit for a facile creating and handling error messages. First it was motivated by the fact that creating a string containing names and current values of variables was not a single-line statement.<p>
Second there was a motivation originating from a parser creation. We sometimes only want to <em>store</em> the information about the (possible) problem, but we do not want to stop the syntax analysis. Therefore we need some mechanism where to (temporarily) store a list of found errors (we would rather call such errors as 'warnings').<p>
Third there was a need to be able to manage the messages in a different (but in enclosed parts of program in a unified) way. For example we sometimes need to flush all the error messages immediatelly to the standard error output. But in a graphical environment we would like to have a list of errors in a separate window (or more windows - each for some part of the system).<p>
The main class that implements these features is <a class="el" href="classerror__vector__t.html" title="The main class in error.hh determined for storing.">error_vector_t</a>. Its instances are called <b>error</b> <b>vectors</b>.<h2><a class="anchor" name="EHU_Parametrization">
Parametrization</a></h2>
<dl class="user" compact><dt><b>2 Classes of Messages</b></dt><dd><a class="el" href="error_page.html">Error vector</a> recognizes 2 classes of error messages: warnings and errors. They are maintained in a different ways. Warnings represent such errors, which do not seriously threaten the computation. Errors represent such errors, which are really fatal for the computation and a program have to jump out of such dangerous place in a code to another place where the exceptions are catched.</dd></dl>
<dl class="user" compact><dt><b>Error Identifiers and Types</b></dt><dd>Error messages can have identifiers. These identifiers are numbers of type <a class="el" href="error_8hh.html#f423e7d7a51d35d40801372d2c104162">ERR_id_t</a> and they should be unique in your program (therefore you should divide carefully an identificator space between another units). There exists also constant <a class="el" href="error_8hh.html#082093873567fa488cdb38c308c710e2">ERR_UNKNOWN_ID</a>, that is equal to zero (you can count on it) and represents unspecified <a class="el" href="IDs.html">error ID</a>.</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd>Error messages can also have types. Error types are numbers of type <a class="el" href="structERR__throw__t.html">ERR_throw_t</a> and they are the numbers passed to the <code>catch</code> block by a <code>throw</code> statement. This error handling unit sometimes throws such exceptions and you can use error types for example to divide behaviour according to the seriousness of the situation (specified when an exception was called).</dd></dl>
<dl class="user" compact><dt><b>Callbacks</b></dt><dd>In a <a class="el" href="error_page.html">error vector</a> there exist callback functions called 'warning handling callback' and 'error handling callback' (see ERR_psh_callback_t and ERR_thr_callback_t). Their default behaviour is described in a reference manual to <a class="el" href="error_8hh.html#a3ebe4347f65094e5607aa475707199e" title="Default &#39;warning handling callback&#39;.">ERR_default_psh_callback()</a> and <a class="el" href="error_8hh.html#73cff83ec1cde80498e492cbbb9e1439" title="Default &#39;error handling callback&#39;.">ERR_default_thr_callback()</a> functions.</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd>When use use <a class="el" href="classerror__vector__t.html#1d17ee96c867fe68fdc75a33ea7c0a9e" title="Sets a &#39;warning handling callback&#39;.">error_vector_t::set_push_callback()</a> and <a class="el" href="classerror__vector__t.html#086e643ae5981bbf7dd7a4e31ec23b97" title="Sets a &#39;error handling callback&#39;.">error_vector_t::set_throw_callback()</a> functions to change the default behaviour of 'warning/error handling callbacks', you preserve some conventions like: 'warning handling callback' will never call <em>throw</em>, 'error handling callback' wiil call <em>throw</em> and moreover it will print some messages on the output (terminal, window, ...), etc.</dd></dl>
<h2><a class="anchor" name="EHU_Usage">
Usage</a></h2>
The basic usage is the following: <div class="fragment"><pre class="fragment"><a class="code" href="error_8hh.html#0dc53778a7848e90e519edb70273ebf6" title="Global error vector `gerr&amp;#39;.">gerr</a> &lt;&lt; <span class="stringliteral">"I'm a mess"</span> &lt;&lt; <span class="stringliteral">"age"</span> &lt;&lt; <span class="stringliteral">" nbr. "</span> &lt;&lt; 1 &lt;&lt; <a class="code" href="structthr.html" title="Structure determined for causing storing/printing error messages.">thr</a>(3,13565);
</pre></div> This causes creating and storing of message "I'm a message nbr. 1" with <a class="el" href="IDs.html">error ID</a> 13565 and type 3. Then the default 'error handling callback' flushes all messages stored in a memory to the standard error output, clears the memory of messages and calls <code>throw</code> <code>3</code>;.<p>
By the same token: <div class="fragment"><pre class="fragment"><a class="code" href="error_8hh.html#0dc53778a7848e90e519edb70273ebf6" title="Global error vector `gerr&amp;#39;.">gerr</a> &lt;&lt; <span class="stringliteral">"I'm a mess"</span> &lt;&lt; <span class="stringliteral">"age"</span> &lt;&lt; <span class="stringliteral">" nbr. "</span> &lt;&lt; 1 &lt;&lt; <a class="code" href="structpsh.html" title="Structure determined for causing storing/printing error messages.">psh</a>(3,13565);
</pre></div> This code causes the end of creation of an error message and message is stored into the list of errors. Then the default 'error handling callback' prints this newly created message to the standard error output and erases a printed message from a memory. Default 'error handling callback' do not use an error type.<p>
<dl class="user" compact><dt><b>Note:</b></dt><dd>In both - <code><a class="el" href="structpsh.html" title="Structure determined for causing storing/printing error messages.">psh</a></code> and <code><a class="el" href="structthr.html" title="Structure determined for causing storing/printing error messages.">thr</a>:</code> Parameters error type and <a class="el" href="IDs.html">error ID</a> are optional. If you want to set <a class="el" href="IDs.html">error ID</a> (e.g. 1777) and you do not want to set the error type, feel free to write <code>0</code> instead of error type (e.g. <code>thr(0,1777)</code> ). You can also use preddefined constant <a class="el" href="error_8hh.html#b4163acc5f0c34a9f07322ecdd7b790d">ERR_UNKNOWN_TYPE</a>, that is also equal to zero.</dd></dl>
<dl class="user" compact><dt><b>Note 2:</b></dt><dd>Default 'warning/error handling callbacks do not use a list of errors They always store only 1 message and speedily they remove it from a list immediately after printing to the standard error output.</dd></dl>
<dl class="user" compact><dt><b>Catching Exceptions:</b></dt><dd>If you have set 'error handling callback' to throw exceptions (default behaviour) you should also catch these exceptions. To catch an exception produced by <code>terr &lt;&lt; thr()</code>, you should use construction <div class="fragment"><pre class="fragment"><span class="keywordflow">try</span> { ... } <span class="keywordflow">catch</span> (<a class="code" href="structERR__throw__t.html">ERR_throw_t</a> &amp; err_type) { ... }
</pre></div></dd></dl>
The above code should be a wrapper for all commands of DiVinE, which you call in your program. The simplest way is: <div class="fragment"><pre class="fragment"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[])
{
 <span class="keywordflow">try</span>
  {
   
  }
 <span class="keywordflow">catch</span> (<a class="code" href="structERR__throw__t.html">ERR_throw_t</a> &amp; err_type)
  { <span class="keywordflow">return</span> err_type; }
 <span class="keywordflow">return</span> 0;
}
</pre></div> But you can also create more complex hiearchy of catching exceptions and manipulate them in a various ways. You can also want to move the most of functionality to the 'error handling callback' (that you can set by <a class="el" href="classerror__vector__t.html#086e643ae5981bbf7dd7a4e31ec23b97">error_vector_t::set_throw_callback()</a> function). It really depends on a type of application, where you use this unit.<h2><a class="anchor" name="EHU_Advanced_Usage">
Advanced Usage</a></h2>
There are many functions to access the messages in an <a class="el" href="error_page.html">error vector</a>. For detailed information about complete interface of <a class="el" href="error_page.html">error vector</a> see <a class="el" href="classerror__vector__t.html" title="The main class in error.hh determined for storing.">error_vector_t</a> class reference. Here we will discuss only some classes of these advanced methods:<ul>
<li>`that' methods - serve to throw a prepared error messge (with given <a class="el" href="IDs.html">error ID</a> and type)</li><li>`push' method - inserts a message without calling 'error/warning handling callback'</li><li>`pop*', `clear' and `flush' methods<ul>
<li>serve to erase selected or all messages from a memory</li></ul>
</li><li>`empty' method - returns whether there exists any stored message</li><li>`perror*' methods - serve to print a stored message to the standard error output</li><li>`string*' methods - serve to get a text of a stored message</li><li>`id*' methods - serve to get an <a class="el" href="IDs.html">error ID</a> of a stored message </li></ul>
</div>

<hr size="1"><small><img align="center" src="divine_mini.gif"><b> Reference Manual for Library, 2006 developed in <a href="http://www.fi.muni.cz/paradise/">ParaDiSe</a> laboratory, <a href="http://www.fi.muni.cz/">Faculty of Informatics</a>, <a href="http://www.muni.cz/">Masaryk University</a></b></small>
</body>
</html>


