<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>DiVinE: dve_explicit_system.hh Source File</title>
<link href="main.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
<h1>dve_explicit_system.hh</h1><a href="dve__explicit__system_8hh.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00004"></a>00004 <span class="preprocessor">#ifndef DIVINE_DVE_EXPLICIT_SYSTEM_HH</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor">#define DIVINE_DVE_EXPLICIT_SYSTEM_HH</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span>
<a name="l00007"></a>00007 <span class="preprocessor">#ifndef DOXYGEN_PROCESSING</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">#include "<a class="code" href="explicit__system_8hh.html">system/explicit_system.hh</a>"</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include "<a class="code" href="dve__symbol__table_8hh.html">system/dve/syntax_analysis/dve_symbol_table.hh</a>"</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include "<a class="code" href="dve__system_8hh.html">system/dve/dve_system.hh</a>"</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include "<a class="code" href="state_8hh.html">system/state.hh</a>"</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include "<a class="code" href="dve__system__trans_8hh.html">system/dve/dve_system_trans.hh</a>"</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include "common/types.hh"</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "common/deb.hh"</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="keyword">namespace </span>divine { <span class="comment">//We want Doxygen not to see namespace `dve'</span>
<a name="l00017"></a>00017 <span class="keyword">using</span> std::cerr; <span class="keyword">using</span> std::endl;
<a name="l00018"></a>00018 <span class="preprocessor">#endif //DOXYGEN_PROCESSING</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>
<a name="l00020"></a>00020 <span class="keyword">class </span><a class="code" href="classdve__process__decomposition__t.html">dve_process_decomposition_t</a>;
<a name="l00021"></a>00021 
<a name="l00023"></a><a class="code" href="dve__explicit__system_8hh.html#2243e0cf0047e58f11f86663254be880">00023</a> <span class="keyword">const</span> size_int_t <a class="code" href="dve__explicit__system_8hh.html#2243e0cf0047e58f11f86663254be880" title="Print names of states instead of state IDs.">ES_FMT_PRINT_STATE_NAMES</a> = 1;
<a name="l00025"></a><a class="code" href="dve__explicit__system_8hh.html#a13b91c592fd55cb3a990b392b173e76">00025</a> <span class="keyword">const</span> size_int_t <a class="code" href="dve__explicit__system_8hh.html#a13b91c592fd55cb3a990b392b173e76" title="Print names of varibles before printing of their values.">ES_FMT_PRINT_VAR_NAMES</a> = 2;
<a name="l00027"></a><a class="code" href="dve__explicit__system_8hh.html#5cb1735de7f77c17c4d3efd600c5e89c">00027</a> <span class="keyword">const</span> size_int_t <a class="code" href="dve__explicit__system_8hh.html#5cb1735de7f77c17c4d3efd600c5e89c" title="Print names of processes before printing of its state and varibles.">ES_FMT_PRINT_PROCESS_NAMES</a> = 4;
<a name="l00029"></a><a class="code" href="dve__explicit__system_8hh.html#f3c6a88147498dff724b229f991d33fd">00029</a> <span class="keyword">const</span> size_int_t <a class="code" href="dve__explicit__system_8hh.html#f3c6a88147498dff724b229f991d33fd" title="Print `new-line&amp;#39; character after each process*/.">ES_FMT_DIVIDE_PROCESSES_BY_CR</a> = 8;
<a name="l00033"></a><a class="code" href="dve__explicit__system_8hh.html#c64d4feece89192c4917c8ff8c407017">00033</a> <span class="keyword">const</span> size_int_t <a class="code" href="dve__explicit__system_8hh.html#c64d4feece89192c4917c8ff8c407017">ES_FMT_PRINT_ALL_NAMES</a> = <a class="code" href="dve__explicit__system_8hh.html#a13b91c592fd55cb3a990b392b173e76" title="Print names of varibles before printing of their values.">ES_FMT_PRINT_VAR_NAMES</a> |
<a name="l00034"></a>00034                                            <a class="code" href="dve__explicit__system_8hh.html#2243e0cf0047e58f11f86663254be880" title="Print names of states instead of state IDs.">ES_FMT_PRINT_STATE_NAMES</a> |
<a name="l00035"></a>00035                                            <a class="code" href="dve__explicit__system_8hh.html#5cb1735de7f77c17c4d3efd600c5e89c" title="Print names of processes before printing of its state and varibles.">ES_FMT_PRINT_PROCESS_NAMES</a> |
<a name="l00036"></a>00036                                            <a class="code" href="dve__explicit__system_8hh.html#f3c6a88147498dff724b229f991d33fd" title="Print `new-line&amp;#39; character after each process*/.">ES_FMT_DIVIDE_PROCESSES_BY_CR</a>;
<a name="l00037"></a>00037 
<a name="l00040"></a><a class="code" href="dve__explicit__system_8hh.html#4d0ea24310be557ea785d5cc0dec09b2">00040</a> <span class="keyword">typedef</span> ushort_int_t <a class="code" href="dve__explicit__system_8hh.html#4d0ea24310be557ea785d5cc0dec09b2">dve_state_int_t</a>;
<a name="l00041"></a>00041 
<a name="l00043"></a>00043 
<a name="l00050"></a><a class="code" href="structES__parameters__t.html">00050</a> <span class="keyword">struct </span><a class="code" href="structES__parameters__t.html" title="Structure determined for passing parameters to ES_*_eval() functions.">ES_parameters_t</a>
<a name="l00051"></a>00051 {
<a name="l00052"></a>00052  <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state;
<a name="l00053"></a>00053  size_int_t * state_positions_var;
<a name="l00054"></a>00054  size_int_t * state_positions_state;
<a name="l00055"></a>00055  size_int_t * state_positions_proc;
<a name="l00056"></a>00056  <a class="code" href="unionSYS__initial__values__t.html" title="Internal type for storing initial values of various identifiers.">SYS_initial_values_t</a> * initial_values;
<a name="l00057"></a>00057  size_int_t * initial_states;
<a name="l00058"></a>00058  size_int_t * state_lids;
<a name="l00059"></a>00059  dve_var_type_t * var_types;
<a name="l00060"></a>00060  size_int_t * array_sizes;
<a name="l00061"></a>00061 };
<a name="l00062"></a>00062 
<a name="l00064"></a><a class="code" href="dve__explicit__system_8hh.html#2ea7d8f37f9f1892ad88bf48137da659">00064</a> <span class="keyword">typedef</span> <a class="code" href="structES__parameters__t.html" title="Structure determined for passing parameters to ES_*_eval() functions.">ES_parameters_t</a> * <a class="code" href="structES__parameters__t.html" title="Structure determined for passing parameters to ES_*_eval() functions.">ES_p_parameters_t</a>;
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="keyword">class </span><a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a>;
<a name="l00067"></a>00067 <span class="keyword">class </span><a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a>;
<a name="l00068"></a>00068 <span class="keyword">class </span><a class="code" href="classdve__system__trans__t.html" title="Class implementing system trasition in DVE system.">dve_system_trans_t</a>;
<a name="l00069"></a>00069 <span class="keyword">class </span><a class="code" href="classdve__enabled__trans__t.html" title="Class implementing enabled trasition in DVE system.">dve_enabled_trans_t</a>;
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 
<a name="l00074"></a>00074 
<a name="l00092"></a><a class="code" href="classdve__explicit__system__t.html">00092</a> <span class="keyword">class </span><a class="code" href="classdve__explicit__system__t.html" title="Class in DVE system interpretation.">dve_explicit_system_t</a> : <span class="keyword">public</span> <span class="keyword">virtual</span> <a class="code" href="classexplicit__system__t.html">explicit_system_t</a>,
<a name="l00093"></a>00093                               <span class="keyword">public</span> <span class="keyword">virtual</span> <a class="code" href="classdve__system__t.html" title="Class for a DVE system representation.">dve_system_t</a>
<a name="l00094"></a>00094 {
<a name="l00095"></a>00095  <span class="comment">//PRIVATE PART:</span>
<a name="l00096"></a>00096  <span class="keyword">private</span>:
<a name="l00097"></a>00097 
<a name="l00098"></a>00098  <a class="code" href="classprocess__decomposition__t.html">process_decomposition_t</a> *property_decomposition;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 
<a name="l00101"></a>00101  <span class="keywordtype">void</span> process_variable(<span class="keyword">const</span> size_int_t gid);
<a name="l00102"></a>00102  <span class="keywordtype">void</span> process_channel(<span class="keyword">const</span> size_int_t gid);
<a name="l00103"></a>00103  <span class="keywordtype">void</span> another_read_stuff(<span class="keywordtype">bool</span> do_expr_compaction = <span class="keyword">true</span>);
<a name="l00104"></a>00104  <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> create_state_by_composition
<a name="l00105"></a>00105      (<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> initial_state, <a class="code" href="classenabled__trans__t.html" title="Class storing informations about one enabled transition.">enabled_trans_t</a> * <span class="keyword">const</span> p_enabled,
<a name="l00106"></a>00106       <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs, size_int_t * trans_indexes,
<a name="l00107"></a>00107       size_int_t * bounds);
<a name="l00108"></a>00108  <span class="keywordtype">bool</span> not_in_glob_conflict(size_int_t * trans_indexes,
<a name="l00109"></a>00109                            size_int_t * bounds);  
<a name="l00110"></a>00110  
<a name="l00111"></a>00111  <span class="comment">//PUBLIC PART:</span>
<a name="l00112"></a>00112  <span class="keyword">public</span>:
<a name="l00113"></a>00113  
<a name="l00115"></a>00115  
<a name="l00117"></a>00117 
<a name="l00118"></a>00118  <a class="code" href="classdve__explicit__system__t.html" title="Class in DVE system interpretation.">dve_explicit_system_t</a>(<a class="code" href="classerror__vector__t.html" title="The main class in error.hh determined for storing.">error_vector_t</a> &amp; evect = <a class="code" href="error_8hh.html#0dc53778a7848e90e519edb70273ebf6" title="Global error vector `gerr&amp;#39;.">gerr</a>);
<a name="l00120"></a>00120  <span class="keyword">virtual</span> ~<a class="code" href="classdve__explicit__system__t.html" title="Class in DVE system interpretation.">dve_explicit_system_t</a>();
<a name="l00121"></a>00121  
<a name="l00126"></a>00126 
<a name="l00127"></a><a class="code" href="classdve__explicit__system__t.html#d6e9b91017a204484891b047bf40efb8">00127</a>  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> is_erroneous(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state)
<a name="l00128"></a>00128  {
<a name="l00129"></a>00129   <span class="keywordflow">return</span> (processes[0]-&gt;get_state_count() ==
<a name="l00130"></a>00130             (state_pos_to&lt;dve_state_int_t&gt;(state,
<a name="l00131"></a>00131                state_positions_proc[processes[0]-&gt;get_gid()])));
<a name="l00132"></a>00132  }
<a name="l00133"></a>00133    
<a name="l00141"></a>00141 
<a name="l00144"></a><a class="code" href="classdve__explicit__system__t.html#f42c3460108956f55f76023de0786630">00144</a>  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> is_accepting(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, size_int_t acc_group=0, size_int_t pair_member=1)
<a name="l00145"></a>00145   {     
<a name="l00146"></a>00146    <span class="keywordflow">return</span> (get_with_property() &amp;&amp; 
<a name="l00147"></a>00147      pproperty-&gt;get_acceptance(state_pos_to&lt;dve_state_int_t&gt;(state, property_position),
<a name="l00148"></a>00148                                acc_group, pair_member));   
<a name="l00149"></a>00149  }
<a name="l00150"></a>00150  
<a name="l00152"></a>00152  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> violates_assertion(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state) <span class="keyword">const</span>;
<a name="l00153"></a>00153 
<a name="l00155"></a>00155  <span class="keyword">virtual</span> size_int_t violated_assertion_count(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state) <span class="keyword">const</span>;
<a name="l00156"></a>00156  
<a name="l00158"></a>00158  <span class="keyword">virtual</span> std::string violated_assertion_string(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state,
<a name="l00159"></a>00159                                                <span class="keyword">const</span> size_int_t index) <span class="keyword">const</span>;
<a name="l00160"></a>00160 
<a name="l00162"></a><a class="code" href="classdve__explicit__system__t.html#714765ae89bdd6df568a3a9ba23e1bb1">00162</a>  size_int_t get_preallocation_count()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> max_succ_count; }
<a name="l00163"></a>00163  
<a name="l00165"></a><a class="code" href="classdve__explicit__system__t.html#5d5a89a60bf32bae1ea887be0fa47ddb">00165</a>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> print_state(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, std::ostream &amp; outs = std::cout)
<a name="l00166"></a>00166  {
<a name="l00167"></a>00167   DBG_print_state(state,outs);
<a name="l00168"></a>00168  }
<a name="l00169"></a>00169  
<a name="l00171"></a>00171  <span class="keyword">virtual</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> get_initial_state();
<a name="l00172"></a>00172 
<a name="l00175"></a>00175  <span class="keyword">virtual</span> <span class="keywordtype">int</span> get_succs
<a name="l00176"></a><a class="code" href="classdve__explicit__system__t.html#e7335b7d66c0cf1e75a75c631290388c">00176</a>    (<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs)
<a name="l00177"></a>00177   {
<a name="l00178"></a>00178    <span class="keywordflow">if</span> (system_synchro==SYSTEM_ASYNC)
<a name="l00179"></a>00179      <span class="keywordflow">return</span> get_async_succs(state, succs);
<a name="l00180"></a>00180    <span class="keywordflow">else</span>
<a name="l00181"></a>00181      <span class="keywordflow">return</span> get_sync_succs(state, succs);
<a name="l00182"></a>00182   } 
<a name="l00183"></a>00183  
<a name="l00186"></a>00186 
<a name="l00190"></a>00190  <span class="keyword">virtual</span> <span class="keywordtype">int</span> get_ith_succ(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> <span class="keywordtype">int</span> i, <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; succ);
<a name="l00196"></a>00196 
<a name="l00197"></a><a class="code" href="classdve__explicit__system__t.html#e169d29afc80e7a3e69d6ed2d7afa3d1">00197</a>    <a class="code" href="classprocess__decomposition__t.html">process_decomposition_t</a> *get_property_decomposition()
<a name="l00198"></a>00198    {
<a name="l00199"></a>00199        <span class="keywordflow">return</span> property_decomposition;
<a name="l00200"></a>00200    }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 
<a name="l00211"></a><a class="code" href="classdve__explicit__system__t.html#6b50b1e05c8184e0a2a9edc1fc0fa359">00211</a>  <span class="keyword">virtual</span> <span class="keywordtype">int</span> get_succs(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs,
<a name="l00212"></a>00212                <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> &amp; etc)
<a name="l00213"></a>00213   {
<a name="l00214"></a>00214    <span class="keywordflow">if</span> (system_synchro==SYSTEM_ASYNC)
<a name="l00215"></a>00215      <span class="keywordflow">return</span> get_async_succs(state, succs, etc);
<a name="l00216"></a>00216    <span class="keywordflow">else</span>
<a name="l00217"></a>00217      <span class="keywordflow">return</span> get_sync_succs(state, succs, etc);
<a name="l00218"></a>00218   }
<a name="l00219"></a>00219  
<a name="l00221"></a><a class="code" href="classdve__explicit__system__t.html#b6d83756bb2f8bc494c9929d3aae325f">00221</a>  <span class="keyword">virtual</span> <span class="keywordtype">int</span> get_enabled_trans(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state,
<a name="l00222"></a>00222                        <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> &amp; enb_trans)
<a name="l00223"></a>00223   {
<a name="l00224"></a>00224    <span class="keywordflow">if</span> (system_synchro==SYSTEM_ASYNC)
<a name="l00225"></a>00225      <span class="keywordflow">return</span> get_async_enabled_trans(state,enb_trans);
<a name="l00226"></a>00226    <span class="keywordflow">else</span>
<a name="l00227"></a>00227      <span class="keywordflow">return</span> get_sync_enabled_trans(state,enb_trans);
<a name="l00228"></a>00228   }
<a name="l00229"></a>00229  
<a name="l00231"></a>00231 
<a name="l00233"></a>00233  <span class="keyword">virtual</span> <span class="keywordtype">int</span> get_enabled_trans_count(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, size_int_t &amp; count);
<a name="l00234"></a>00234  
<a name="l00237"></a>00237 
<a name="l00240"></a>00240  <span class="keyword">virtual</span> <span class="keywordtype">int</span> get_enabled_ith_trans(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state,
<a name="l00241"></a>00241                                  <span class="keyword">const</span> size_int_t i,
<a name="l00242"></a>00242                                  <a class="code" href="classenabled__trans__t.html" title="Class storing informations about one enabled transition.">enabled_trans_t</a> &amp; enb_trans);
<a name="l00243"></a>00243 
<a name="l00245"></a>00245  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> get_enabled_trans_succ
<a name="l00246"></a><a class="code" href="classdve__explicit__system__t.html#d58fffa8c8e6ecaf9dc41d49c1f35b55">00246</a>    (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> <a class="code" href="classenabled__trans__t.html" title="Class storing informations about one enabled transition.">enabled_trans_t</a> &amp; enabled,
<a name="l00247"></a>00247     <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; new_state)
<a name="l00248"></a>00248  {
<a name="l00249"></a>00249    <span class="keywordflow">if</span> (system_synchro==SYSTEM_ASYNC)
<a name="l00250"></a>00250      <span class="keywordflow">return</span> get_async_enabled_trans_succ(state, enabled, new_state);
<a name="l00251"></a>00251    <span class="keywordflow">else</span>
<a name="l00252"></a>00252      <span class="keywordflow">return</span> get_sync_enabled_trans_succ(state, enabled, new_state);
<a name="l00253"></a>00253  }
<a name="l00254"></a>00254  
<a name="l00256"></a>00256  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> get_enabled_trans_succs
<a name="l00257"></a><a class="code" href="classdve__explicit__system__t.html#ef0252df9585c2c7a1a7bda99e70764c">00257</a>    (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs,
<a name="l00258"></a>00258     <span class="keyword">const</span> <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> &amp; enabled_trans)
<a name="l00259"></a>00259  {
<a name="l00260"></a>00260    <span class="keywordflow">if</span> (system_synchro==SYSTEM_ASYNC)
<a name="l00261"></a>00261      <span class="keywordflow">return</span> get_async_enabled_trans_succs(state, succs, enabled_trans);
<a name="l00262"></a>00262    <span class="keywordflow">else</span>
<a name="l00263"></a>00263      <span class="keywordflow">return</span> get_sync_enabled_trans_succs(state, succs, enabled_trans);
<a name="l00264"></a>00264  }
<a name="l00265"></a>00265  
<a name="l00267"></a>00267  <span class="keyword">virtual</span> <a class="code" href="classenabled__trans__t.html" title="Class storing informations about one enabled transition.">enabled_trans_t</a> * new_enabled_trans() <span class="keyword">const</span>;
<a name="l00268"></a>00268  
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 
<a name="l00275"></a>00275 
<a name="l00276"></a><a class="code" href="classdve__explicit__system__t.html#26d84732da69c26e4b508a479f342bb3">00276</a>  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> eval_expr(<span class="keyword">const</span> <a class="code" href="classexpression__t.html" title="Abstact interface of a class representing an expression.">expression_t</a> * <span class="keyword">const</span> expr,
<a name="l00277"></a>00277                         <span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state,
<a name="l00278"></a>00278                         <a class="code" href="classdata__t.html" title="Class representing a general data type.">data_t</a> &amp; data)<span class="keyword"> const</span>
<a name="l00279"></a>00279 <span class="keyword"> </span>{
<a name="l00280"></a>00280   <span class="keywordtype">bool</span> eval_err;
<a name="l00281"></a>00281   data.<a class="code" href="classdata__t.html#cb8f544137e99dfc86473a99365150a7">assign</a>&lt;all_values_t&gt;(eval_expr(dynamic_cast&lt;const dve_expression_t*&gt;(expr),
<a name="l00282"></a>00282                             state, eval_err));
<a name="l00283"></a>00283   <span class="keywordflow">return</span> eval_err;
<a name="l00284"></a>00284  }
<a name="l00288"></a>00288 
<a name="l00289"></a>00289 
<a name="l00294"></a>00294  <span class="comment">//debugging functions espesially for printing contents of states</span>
<a name="l00296"></a>00296 <span class="comment"></span>
<a name="l00307"></a>00307  <span class="keywordtype">void</span> DBG_print_state(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, std::ostream &amp; outs = std::cerr,
<a name="l00308"></a>00308                       <span class="keyword">const</span> ulong_int_t format = <a class="code" href="dve__explicit__system_8hh.html#c64d4feece89192c4917c8ff8c407017">ES_FMT_PRINT_ALL_NAMES</a>);
<a name="l00309"></a>00309  
<a name="l00312"></a><a class="code" href="classdve__explicit__system__t.html#97128ea602d931ee4804db18a73e4bd6">00312</a>  <span class="keywordtype">void</span> DBG_print_state_CR(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, std::ostream &amp; outs = std::cerr,
<a name="l00313"></a>00313                          <span class="keyword">const</span> ulong_int_t format = <a class="code" href="dve__explicit__system_8hh.html#c64d4feece89192c4917c8ff8c407017">ES_FMT_PRINT_ALL_NAMES</a>)
<a name="l00314"></a>00314  { DBG_print_state(state,outs,format); outs &lt;&lt; std::endl; }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316  
<a name="l00318"></a>00318 
<a name="l00323"></a><a class="code" href="classdve__explicit__system__t.html#bc2cfb97de1e70c29e5ed8af5bfb93a2">00323</a>  <span class="keywordtype">bool</span> is_accepting(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, size_int_t process_id)
<a name="l00324"></a>00324  {
<a name="l00325"></a>00325   <span class="keywordflow">return</span> processes[process_id]-&gt;get_acceptance(
<a name="l00326"></a>00326                       state_pos_to&lt;dve_state_int_t&gt;(state,
<a name="l00327"></a>00327                       state_positions_proc[processes[process_id]-&gt;get_gid()]));
<a name="l00328"></a>00328  }
<a name="l00329"></a>00329  
<a name="l00331"></a>00331 
<a name="l00336"></a><a class="code" href="classdve__explicit__system__t.html#59881dcb14d893701fcfe481ff5507de">00336</a>   <span class="keyword">virtual</span> slong_int_t read(<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> filename)
<a name="l00337"></a>00337   { <span class="keywordflow">return</span> read(filename,<span class="keyword">true</span>); }
<a name="l00339"></a>00339 
<a name="l00344"></a>00344   <span class="keyword">virtual</span> slong_int_t read(<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> filename, <span class="keywordtype">bool</span> do_comp);
<a name="l00345"></a>00345 
<a name="l00346"></a>00346  
<a name="l00348"></a>00348  size_int_t get_space_sum() <span class="keyword">const</span>;
<a name="l00349"></a>00349  
<a name="l00351"></a>00351 
<a name="l00358"></a><a class="code" href="classdve__explicit__system__t.html#f7c9e797396fd6a0a0da8e9dde0b3e6b">00358</a>  all_values_t eval_expr(<span class="keyword">const</span> <a class="code" href="classdve__expression__t.html" title="Class representing an expression in DVE system.">dve_expression_t</a> * <span class="keyword">const</span> expr,
<a name="l00359"></a>00359                                          <span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state,
<a name="l00360"></a>00360                                          <span class="keywordtype">bool</span> &amp; eval_err)<span class="keyword"> const</span>
<a name="l00361"></a>00361 <span class="keyword">  </span>{ <a class="code" href="dve__explicit__system_8hh.html#2ea7d8f37f9f1892ad88bf48137da659" title="Pointer to ES_parameters_t.">ES_p_parameters_t</a>(parameters)-&gt;<a class="code" href="structES__parameters__t.html#499e7824037af983d0524a98081e7f0b">state</a> = state;
<a name="l00362"></a>00362   <span class="keywordflow">if</span> (expr-&gt;<a class="code" href="classdve__expression__t.html#e1895112abd8708ecbf9fe4a077507cb" title="Says whether the expression is compacted.">is_compacted</a>())
<a name="l00363"></a>00363     {      
<a name="l00364"></a>00364       <span class="comment">//DEBFUNC(cerr&lt;&lt;"Eval: "&lt;&lt;expr-&gt;to_string()&lt;&lt;endl;);</span>
<a name="l00365"></a>00365       <span class="keywordflow">return</span> <a class="code" href="classdve__system__t.html#a99caeff06e67d07b888cfecc46ae1fb" title="Evaluates a compacted expression.">dve_system_t::fast_eval</a>(expr-&gt;<a class="code" href="classdve__expression__t.html#2c276173fc7d94979f4a012684713312" title="Returns pointer to compacted representation.">get_p_compact</a>(),eval_err);
<a name="l00366"></a>00366     }
<a name="l00367"></a>00367   <span class="keywordflow">else</span>
<a name="l00368"></a>00368     <span class="keywordflow">return</span> <a class="code" href="classdve__system__t.html#feb6bf40944247a564949113f6190530" title="Evaluates an expression.">dve_system_t::eval_expr</a>(expr,eval_err); 
<a name="l00369"></a>00369   }
<a name="l00370"></a>00370  
<a name="l00372"></a>00372  all_values_t get_var_value
<a name="l00373"></a><a class="code" href="classdve__explicit__system__t.html#bf353d35e2277c6e34072f40fbac8268">00373</a>    (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, size_int_t var_gid, <span class="keyword">const</span> size_int_t index=0)
<a name="l00374"></a>00374  {
<a name="l00375"></a>00375    <span class="keywordflow">return</span> (
<a name="l00376"></a>00376            constants[var_gid]?
<a name="l00377"></a>00377              (
<a name="l00378"></a>00378                (initial_values_counts[var_gid]!=MAX_INIT_VALUES_SIZE)?
<a name="l00379"></a>00379                initial_values[var_gid].all_value:
<a name="l00380"></a>00380                initial_values[var_gid].all_values[index]
<a name="l00381"></a>00381              ):
<a name="l00382"></a>00382              get_state_creator_value_of_var_type(state,var_gid,
<a name="l00383"></a>00383                                                  var_types[var_gid],index)
<a name="l00384"></a>00384           );
<a name="l00385"></a>00385  }
<a name="l00386"></a>00386  
<a name="l00388"></a>00388 
<a name="l00396"></a><a class="code" href="classdve__explicit__system__t.html#2430c56a0a8f6aab8eea299d76422553">00396</a>  <span class="keywordtype">bool</span> set_var_value(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> size_int_t var_gid,
<a name="l00397"></a>00397     <span class="keyword">const</span> all_values_t v, <span class="keyword">const</span> size_int_t index=0)
<a name="l00398"></a>00398  {
<a name="l00399"></a>00399    <span class="keywordflow">return</span> constants[var_gid] ||
<a name="l00400"></a>00400           set_state_creator_value(state,var_gid,v,index);
<a name="l00401"></a>00401  }
<a name="l00402"></a>00402  
<a name="l00405"></a>00405  size_int_t get_state_of_process(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, size_int_t process_id) <span class="keyword">const</span>;
<a name="l00406"></a>00406  
<a name="l00408"></a>00408 
<a name="l00419"></a>00419  <a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * get_sending_or_normal_trans(<span class="keyword">const</span> <a class="code" href="classsystem__trans__t.html" title="Class storing informations about one system transition.">system_trans_t</a> &amp; sys_trans)
<a name="l00420"></a>00420                                                                          <span class="keyword">const</span>;
<a name="l00421"></a>00421  
<a name="l00423"></a>00423 
<a name="l00431"></a>00431  <a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * get_receiving_trans(<span class="keyword">const</span> <a class="code" href="classsystem__trans__t.html" title="Class storing informations about one system transition.">system_trans_t</a> &amp; sys_trans) <span class="keyword">const</span>;
<a name="l00432"></a>00432  
<a name="l00434"></a>00434 
<a name="l00443"></a>00443  <a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * get_property_trans(<span class="keyword">const</span> <a class="code" href="classsystem__trans__t.html" title="Class storing informations about one system transition.">system_trans_t</a> &amp; sys_trans) <span class="keyword">const</span>;
<a name="l00446"></a>00446 
<a name="l00447"></a><a class="code" href="classdve__explicit__system__t.html#ef16d140fe40ed7148504ec8cff4251f">00447</a>  size_int_t get_var_pos(<span class="keyword">const</span> size_int_t gid)<span class="keyword"> const </span>
<a name="l00448"></a>00448 <span class="keyword"> </span>{ <span class="keywordflow">return</span> state_positions_var[gid]; }
<a name="l00449"></a>00449 
<a name="l00451"></a><a class="code" href="classdve__explicit__system__t.html#cf91c0dad82ced0506d1b2b7fe536c4c">00451</a>  size_int_t get_channel_pos(<span class="keyword">const</span> size_int_t gid)<span class="keyword"> const </span>
<a name="l00452"></a>00452 <span class="keyword"> </span>{ <span class="keywordflow">return</span> state_positions_channel[gid]; }
<a name="l00453"></a>00453  
<a name="l00455"></a><a class="code" href="classdve__explicit__system__t.html#81d987b7fed6f5ca86852ee233136964">00455</a>  size_int_t get_process_pos(<span class="keyword">const</span> size_int_t gid)<span class="keyword"> const </span>
<a name="l00456"></a>00456 <span class="keyword"> </span>{ <span class="keywordflow">return</span> process_positions[gid].begin; }
<a name="l00457"></a>00457 
<a name="l00459"></a><a class="code" href="classdve__explicit__system__t.html#af157623cf8649cb5675fafee1a9982d">00459</a>  size_int_t get_process_size(<span class="keyword">const</span> size_int_t gid)<span class="keyword"> const </span>
<a name="l00460"></a>00460 <span class="keyword"> </span>{ <span class="keywordflow">return</span> process_positions[gid].size; }
<a name="l00461"></a>00461  
<a name="l00462"></a>00462 
<a name="l00463"></a>00463  <span class="comment">//PROTECTED PART:</span>
<a name="l00464"></a>00464  <span class="keyword">protected</span>:
<a name="l00465"></a>00465  <span class="comment">//TYPES:</span>
<a name="l00466"></a>00466  <span class="keyword">struct </span>proc_and_trans_t
<a name="l00467"></a>00467  { size_int_t proc; size_int_t trans;
<a name="l00468"></a>00468    proc_and_trans_t() {}
<a name="l00469"></a>00469    proc_and_trans_t(size_int_t p, size_int_t t): proc(p), trans(t) {}
<a name="l00470"></a>00470  };
<a name="l00471"></a>00471  
<a name="l00472"></a>00472  <span class="keyword">struct </span>channels_t
<a name="l00473"></a>00473  {
<a name="l00474"></a>00474   size_int_t count;
<a name="l00475"></a>00475   <span class="keywordtype">bool</span> error; <span class="comment">//says, that computing on asking transitions was errorneous</span>
<a name="l00476"></a>00476   proc_and_trans_t * list;
<a name="l00477"></a>00477   
<a name="l00478"></a>00478   channels_t(<span class="keyword">const</span> size_int_t alloc) { allocate(alloc); }
<a name="l00479"></a>00479   channels_t() { list = 0; }
<a name="l00480"></a>00480   ~channels_t() { DEBAUX(std::cerr &lt;&lt; <span class="stringliteral">"BEGIN of destructor of channels_t"</span> &lt;&lt; std::endl;) <span class="keywordflow">if</span> (list) delete [] list; DEBAUX(std::cerr &lt;&lt; "END of destructor of channels_t" &lt;&lt; std::endl;)}
<a name="l00481"></a>00481   <span class="keywordtype">void</span> set_error(const <span class="keywordtype">bool</span> new_error) { error = new_error; }
<a name="l00482"></a>00482   <span class="keywordtype">bool</span> get_error() { <span class="keywordflow">return</span> error; }
<a name="l00483"></a>00483   <span class="keywordtype">void</span> allocate(<span class="keyword">const</span> size_int_t alloc) { list = <span class="keyword">new</span> proc_and_trans_t[alloc]; }
<a name="l00484"></a>00484   <span class="keywordtype">void</span> push_back(<span class="keyword">const</span> proc_and_trans_t &amp; pat) { list[count] = pat; ++count; }
<a name="l00485"></a>00485  };
<a name="l00486"></a>00486 
<a name="l00487"></a>00487  <span class="keyword">struct </span>process_position_t
<a name="l00488"></a>00488  {
<a name="l00489"></a>00489   size_int_t begin;
<a name="l00490"></a>00490   size_int_t size;
<a name="l00491"></a>00491  };
<a name="l00492"></a>00492 
<a name="l00495"></a>00495 
<a name="l00497"></a><a class="code" href="structdve__explicit__system__t_1_1state__creator__t.html">00497</a>  <span class="keyword">struct </span><a class="code" href="structdve__explicit__system__t_1_1state__creator__t.html">state_creator_t</a>
<a name="l00498"></a>00498  {
<a name="l00499"></a>00499   <span class="keyword">enum</span> state_creator_type_t { VARIABLE, PROCESS_STATE, CHANNEL_BUFFER };
<a name="l00500"></a>00500   state_creator_type_t type; <span class="comment">//stores a kind of state creator (variable, ...)</span>
<a name="l00501"></a>00501   dve_var_type_t var_type; <span class="comment">//int,byte,...</span>
<a name="l00502"></a>00502   size_int_t array_size; <span class="comment">//size of an array, when the state creator is an array</span>
<a name="l00503"></a>00503                           <span class="comment">//otherwise array_size = 0</span>
<a name="l00504"></a>00504   size_int_t gid;
<a name="l00505"></a>00505   <a class="code" href="structdve__explicit__system__t_1_1state__creator__t.html">state_creator_t</a>
<a name="l00506"></a>00506     (<span class="keyword">const</span> state_creator_type_t sc_type,
<a name="l00507"></a>00507      dve_var_type_t vtype, <span class="keyword">const</span> size_int_t arr_size,
<a name="l00508"></a>00508      <span class="keyword">const</span> size_int_t gid_arg):
<a name="l00509"></a>00509      type(sc_type), var_type(vtype), array_size(arr_size), gid(gid_arg) {}
<a name="l00510"></a>00510  };
<a name="l00511"></a>00511  
<a name="l00512"></a>00512  <span class="keyword">struct </span>prop_trans_t
<a name="l00513"></a>00513  {
<a name="l00514"></a>00514   <a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * trans;
<a name="l00515"></a>00515   <span class="keywordtype">bool</span> error;
<a name="l00516"></a>00516   <span class="keywordtype">void</span> assign(<a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * <span class="keyword">const</span> transition, <span class="keyword">const</span> <span class="keywordtype">bool</span> erroneous)
<a name="l00517"></a>00517   { trans = transition; error = erroneous; }
<a name="l00518"></a>00518  };
<a name="l00519"></a>00519  
<a name="l00520"></a>00520  <span class="comment">//DATA:</span>
<a name="l00521"></a>00521  <a class="code" href="classarray__t.html" title="Simple resizable container representing 1-dimensional array.">array_t&lt;byte_t *&gt;</a> glob_filters; <span class="comment">//list of glob_filters for all transitions</span>
<a name="l00522"></a>00522  size_int_t first_in_succs;
<a name="l00523"></a>00523  <span class="comment">//proc_info_t * proc_infos;</span>
<a name="l00524"></a>00524  size_int_t trans_count;
<a name="l00525"></a>00525  <span class="comment">//size_int_t enabled_trans_count;</span>
<a name="l00526"></a>00526  size_int_t max_succ_count;
<a name="l00527"></a>00527  <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> * p_enabled_trans;
<a name="l00528"></a>00528  <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> * aux_enabled_trans;
<a name="l00529"></a>00529  <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> * aux_enabled_trans2;
<a name="l00530"></a>00530  <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> * aux_succ_container;
<a name="l00531"></a>00531  
<a name="l00532"></a>00532  channels_t * channels;
<a name="l00533"></a>00533  <a class="code" href="classarray__t.html" title="Simple resizable container representing 1-dimensional array.">array_t&lt;prop_trans_t&gt;</a> property_trans;
<a name="l00534"></a>00534  size_int_t * state_positions_var;
<a name="l00535"></a>00535  size_int_t * state_positions_state;
<a name="l00536"></a>00536  size_int_t * state_positions_proc;
<a name="l00537"></a>00537  size_int_t * state_positions_channel;<span class="comment">//positions of channels in states</span>
<a name="l00538"></a>00538  size_int_t * channel_buffer_size;     <span class="comment">//sizes of buffers of channels</span>
<a name="l00539"></a>00539  size_int_t * channel_element_size;   <span class="comment">//sizes of elements for each buffer</span>
<a name="l00540"></a>00540  dve_var_type_t ** channel_item_type; <span class="comment">//types of items of given channels</span>
<a name="l00541"></a>00541  size_int_t ** channel_item_pos;      <span class="comment">//offset of item of element in a channel</span>
<a name="l00542"></a>00542  size_int_t * state_sizes_var;
<a name="l00543"></a>00543  size_int_t * array_sizes;
<a name="l00544"></a>00544  process_position_t * process_positions;
<a name="l00545"></a>00545  process_position_t global_position;
<a name="l00546"></a>00546  size_int_t process_count;
<a name="l00547"></a>00547  size_int_t space_sum;
<a name="l00548"></a>00548  <span class="comment">//GIDs of symbols creating the states (non-constant variables and procnames)</span>
<a name="l00549"></a>00549  <span class="comment">//(procnames reprezent space for state of process)</span>
<a name="l00550"></a>00550  std::vector&lt;state_creator_t&gt; state_creators; <span class="comment">//used in get_initial_state()</span>
<a name="l00551"></a>00551  size_int_t state_creators_count;
<a name="l00552"></a>00552  size_int_t property_position;
<a name="l00553"></a>00553  size_int_t prop_begin;
<a name="l00554"></a>00554  size_int_t prop_size;
<a name="l00555"></a>00555  size_int_t glob_count;
<a name="l00556"></a>00556  
<a name="l00557"></a>00557  
<a name="l00560"></a>00560  <span class="comment">/* Changes the piece of memory in \a state so, that error </span>
<a name="l00561"></a>00561 <span class="comment">  * \param state = state of the system</span>
<a name="l00562"></a>00562 <span class="comment">  * \param process = pointer on constant structure representring the process</span>
<a name="l00563"></a>00563 <span class="comment">  */</span>
<a name="l00564"></a>00564  <span class="keywordtype">void</span> go_to_error(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state);
<a name="l00565"></a>00565  
<a name="l00568"></a><a class="code" href="classdve__explicit__system__t.html#4c6b3f9c938390f0b66619806fb0ff06">00568</a>  <span class="keywordtype">bool</span> not_in_glob_conflict(<span class="keyword">const</span> <a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * <span class="keyword">const</span> t1,
<a name="l00569"></a>00569                            <span class="keyword">const</span> <a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * <span class="keyword">const</span> t2)
<a name="l00570"></a>00570  { <span class="keywordflow">return</span> (t1-&gt;<a class="code" href="classdve__transition__t.html#bf8fd2c04660f682690bf430ef5cd6ef" title="Returns a bit mask of assigned variables.">get_glob_mask</a>() &amp; t2-&gt;<a class="code" href="classdve__transition__t.html#bf8fd2c04660f682690bf430ef5cd6ef" title="Returns a bit mask of assigned variables.">get_glob_mask</a>()); }
<a name="l00571"></a>00571  
<a name="l00573"></a>00573  <span class="comment">/* Creates a successor of system state \a state by applying effects of</span>
<a name="l00574"></a>00574 <span class="comment">  * the transition \a trans idependently on satisfying conditions of guard,</span>
<a name="l00575"></a>00575 <span class="comment">  * synchonity etc.</span>
<a name="l00576"></a>00576 <span class="comment">  * There is not created any new state of the \sys, but the state `state' is</span>
<a name="l00577"></a>00577 <span class="comment">  * modified. */</span>
<a name="l00578"></a>00578  <span class="keywordtype">bool</span> apply_transition_effects
<a name="l00579"></a>00579    (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> <a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * <span class="keyword">const</span> trans);
<a name="l00580"></a>00580 
<a name="l00582"></a>00582  <span class="comment">/* Creates a successor of the state of the \sys \a state by applying</span>
<a name="l00583"></a>00583 <span class="comment">  * effect \a effect on it.</span>
<a name="l00584"></a>00584 <span class="comment">  * There is not created any new system state, but state \a state is</span>
<a name="l00585"></a>00585 <span class="comment">  * modified.</span>
<a name="l00586"></a>00586 <span class="comment">  *</span>
<a name="l00587"></a>00587 <span class="comment">  * You have to ensure that `effect' is an expression that is really</span>
<a name="l00588"></a>00588 <span class="comment">  * an effect - that means there is an assignment operator in a root of</span>
<a name="l00589"></a>00589 <span class="comment">  * syntax tree of such an expression. */</span>
<a name="l00590"></a>00590  <span class="keywordtype">bool</span> apply_effect
<a name="l00591"></a>00591    (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> <a class="code" href="classdve__expression__t.html" title="Class representing an expression in DVE system.">dve_expression_t</a> * <span class="keyword">const</span> effect);
<a name="l00592"></a>00592 
<a name="l00593"></a>00593 
<a name="l00595"></a><a class="code" href="classdve__explicit__system__t.html#426bbfd6597ecc0d47552ef3c4f9d044">00595</a>  <span class="keywordtype">int</span> get_async_succs(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs)
<a name="l00596"></a>00596  { p_enabled_trans = aux_enabled_trans;
<a name="l00597"></a>00597    <span class="keywordflow">return</span> get_async_succs_internal(state,succs); }
<a name="l00598"></a>00598  
<a name="l00600"></a><a class="code" href="classdve__explicit__system__t.html#f0e13532230b7f23344099356cc7babd">00600</a>  <span class="keywordtype">int</span> get_sync_succs(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs)
<a name="l00601"></a>00601  { <span class="keywordflow">return</span> get_sync_succs_internal(state, succs, aux_enabled_trans2); }
<a name="l00602"></a>00602  
<a name="l00604"></a><a class="code" href="classdve__explicit__system__t.html#650c5657ec1020476e635a73dabb0d2a">00604</a>  <span class="keywordtype">int</span> get_async_succs(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs,
<a name="l00605"></a>00605                      <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> &amp; enb_trans)
<a name="l00606"></a>00606  { p_enabled_trans = &amp;enb_trans; <span class="keywordflow">return</span> get_async_succs_internal(state,succs); }
<a name="l00607"></a>00607  
<a name="l00609"></a><a class="code" href="classdve__explicit__system__t.html#3e5ce86b96fed7e38e6e47a3d5305672">00609</a>  <span class="keywordtype">int</span> get_sync_succs(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs,
<a name="l00610"></a>00610                     <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> &amp; etc)
<a name="l00611"></a>00611  { <span class="keywordflow">return</span> get_sync_succs_internal(state, succs, &amp;etc); }
<a name="l00612"></a>00612  
<a name="l00613"></a>00613  
<a name="l00615"></a>00615  <span class="keywordtype">int</span> get_async_enabled_trans(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state,
<a name="l00616"></a>00616                             <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> &amp; enb_trans);
<a name="l00617"></a>00617  
<a name="l00619"></a>00619  <span class="keywordtype">int</span> get_sync_enabled_trans(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state,
<a name="l00620"></a>00620                             <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> &amp; enb_trans);
<a name="l00621"></a>00621  
<a name="l00623"></a>00623  <span class="keywordtype">bool</span> get_async_enabled_trans_succ
<a name="l00624"></a>00624    (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> <a class="code" href="classenabled__trans__t.html" title="Class storing informations about one enabled transition.">enabled_trans_t</a> &amp; enabled,
<a name="l00625"></a>00625     <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; new_state);
<a name="l00626"></a>00626  
<a name="l00628"></a>00628  <span class="keywordtype">bool</span> get_sync_enabled_trans_succ
<a name="l00629"></a>00629    (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> <a class="code" href="classenabled__trans__t.html" title="Class storing informations about one enabled transition.">enabled_trans_t</a> &amp; enabled,
<a name="l00630"></a>00630     <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; new_state);
<a name="l00631"></a>00631  
<a name="l00634"></a>00634 
<a name="l00637"></a>00637  <span class="keywordtype">bool</span> get_async_enabled_trans_succ
<a name="l00638"></a>00638    (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> <a class="code" href="classenabled__trans__t.html" title="Class storing informations about one enabled transition.">enabled_trans_t</a> &amp; enabled,
<a name="l00639"></a>00639     <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; new_state, <span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> property_state);
<a name="l00640"></a>00640  
<a name="l00642"></a>00642  <span class="keywordtype">bool</span> get_async_enabled_trans_succs
<a name="l00643"></a>00643    (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs,
<a name="l00644"></a>00644     <span class="keyword">const</span> <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> &amp; enabled_trans);
<a name="l00645"></a>00645  
<a name="l00646"></a>00646  
<a name="l00648"></a>00648  <span class="keywordtype">bool</span> get_sync_enabled_trans_succs
<a name="l00649"></a>00649    (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs,
<a name="l00650"></a>00650     <span class="keyword">const</span> <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> &amp; enabled_trans);
<a name="l00651"></a>00651  
<a name="l00654"></a>00654  <span class="keywordtype">bool</span> get_async_enabled_trans_succ_without_property
<a name="l00655"></a>00655    (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> <a class="code" href="classenabled__trans__t.html" title="Class storing informations about one enabled transition.">enabled_trans_t</a> &amp; enabled, <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; new_state);
<a name="l00656"></a>00656  
<a name="l00657"></a>00657 
<a name="l00659"></a>00659 
<a name="l00665"></a>00665  <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> create_error_state();
<a name="l00666"></a>00666  
<a name="l00669"></a>00669  <span class="keywordtype">bool</span> compute_successors_without_sync
<a name="l00670"></a>00670    (<span class="keyword">const</span> size_int_t process_number,
<a name="l00671"></a>00671     <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs, <span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state);
<a name="l00672"></a>00672  
<a name="l00675"></a>00675 
<a name="l00681"></a>00681  <span class="keywordtype">void</span> append_new_enabled(<a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * <span class="keyword">const</span> t_answ,
<a name="l00682"></a>00682                          <a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * <span class="keyword">const</span> t_ask,
<a name="l00683"></a>00683                          <span class="keyword">const</span> <span class="keywordtype">bool</span> trans_err);
<a name="l00684"></a>00684 
<a name="l00686"></a>00686  <span class="comment">// transition and erroneousness.</span>
<a name="l00692"></a>00692 <span class="comment"></span> <span class="keywordtype">void</span> append_new_enabled_prop_sync(<a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * <span class="keyword">const</span> t_answ,
<a name="l00693"></a>00693                                    <a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * <span class="keyword">const</span> t_prop,
<a name="l00694"></a>00694                                    <span class="keyword">const</span> <span class="keywordtype">bool</span> trans_err);
<a name="l00695"></a>00695  
<a name="l00698"></a>00698  <span class="keywordtype">bool</span> compute_enabled_stage1
<a name="l00699"></a>00699    (<span class="keyword">const</span> size_int_t process_number,
<a name="l00700"></a>00700     channels_t * channels, <span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> <span class="keywordtype">bool</span> only_commited);
<a name="l00701"></a>00701     
<a name="l00704"></a>00704 
<a name="l00708"></a>00708  <span class="keywordtype">bool</span> compute_enabled_stage2
<a name="l00709"></a>00709    (<span class="keyword">const</span> size_int_t process_number,
<a name="l00710"></a>00710     channels_t * channels, <span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> <span class="keywordtype">bool</span> only_commited);
<a name="l00711"></a>00711  
<a name="l00714"></a>00714  <span class="keywordtype">bool</span> compute_enabled_of_property(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state);
<a name="l00715"></a>00715  
<a name="l00717"></a>00717 
<a name="l00726"></a>00726  all_values_t get_state_creator_value_of_var_type
<a name="l00727"></a>00727    (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, size_int_t var_gid, <span class="keyword">const</span> dve_var_type_t var_type,
<a name="l00728"></a>00728     <span class="keyword">const</span> size_int_t index=0);
<a name="l00729"></a>00729  
<a name="l00731"></a>00731 
<a name="l00739"></a>00739  <span class="keywordtype">bool</span> set_state_creator_value_of_var_type(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state,
<a name="l00740"></a>00740     <span class="keyword">const</span> size_int_t var_gid, <span class="keyword">const</span> dve_var_type_t var_type, <span class="keyword">const</span> all_values_t v,
<a name="l00741"></a>00741     <span class="keyword">const</span> size_int_t index);
<a name="l00742"></a>00742 
<a name="l00745"></a><a class="code" href="classdve__explicit__system__t.html#d5c4b8a034c78bbada69a9eac422db89">00745</a>  <span class="keywordtype">bool</span> set_state_creator_value(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> size_int_t var_gid,
<a name="l00746"></a>00746     <span class="keyword">const</span> all_values_t v, <span class="keyword">const</span> size_int_t index=0)
<a name="l00747"></a>00747  { <span class="keywordflow">return</span> set_state_creator_value_of_var_type(state,var_gid,var_types[var_gid],
<a name="l00748"></a>00748                                               v,index); }
<a name="l00750"></a>00750 
<a name="l00758"></a>00758  <span class="keywordtype">void</span> set_state_creator_value_extended(
<a name="l00759"></a>00759    <span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; state, <span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; new_state,
<a name="l00760"></a>00760    <span class="keyword">const</span> <a class="code" href="classdve__expression__t.html" title="Class representing an expression in DVE system.">dve_expression_t</a> &amp; to_assign, <span class="keyword">const</span> all_values_t &amp; val, <span class="keywordtype">bool</span> &amp; error);
<a name="l00761"></a>00761  
<a name="l00763"></a>00763  <span class="keywordtype">int</span> get_async_succs_internal(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs);
<a name="l00764"></a>00764  
<a name="l00766"></a>00766  <span class="keywordtype">int</span> get_sync_succs_internal(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <a class="code" href="classsucc__container__t.html" title="Class determined to store successors of some state.">succ_container_t</a> &amp; succs,
<a name="l00767"></a>00767                              <a class="code" href="classenabled__trans__container__t.html" title="Container determined for storing enabled processes in one state.">enabled_trans_container_t</a> * <span class="keyword">const</span> etc);
<a name="l00768"></a>00768  
<a name="l00771"></a>00771  size_int_t channel_content_count(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; state, <span class="keyword">const</span> size_int_t gid);
<a name="l00772"></a>00772  
<a name="l00774"></a>00774  <span class="keywordtype">bool</span> channel_is_empty(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; state, <span class="keyword">const</span> size_int_t gid);
<a name="l00775"></a>00775 
<a name="l00777"></a>00777  <span class="keywordtype">bool</span> channel_is_full(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; state, <span class="keyword">const</span> size_int_t gid);
<a name="l00778"></a>00778  
<a name="l00779"></a>00779  <span class="keywordtype">void</span> push_back_channel(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; state, <span class="keyword">const</span> size_int_t gid);
<a name="l00780"></a>00780  <span class="keywordtype">void</span> pop_front_channel(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; state, <span class="keyword">const</span> size_int_t gid);
<a name="l00781"></a>00781  <span class="keywordtype">void</span> write_to_channel(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; state, <span class="keyword">const</span> size_int_t gid,
<a name="l00782"></a>00782                        <span class="keyword">const</span> size_int_t item_index, <span class="keyword">const</span> all_values_t value);
<a name="l00783"></a>00783  all_values_t read_from_channel(<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> &amp; state, <span class="keyword">const</span> size_int_t gid,
<a name="l00784"></a>00784                                 <span class="keyword">const</span> size_int_t item_index,
<a name="l00785"></a>00785                                 <span class="keyword">const</span> size_int_t elem_index = 0);
<a name="l00786"></a>00786 <span class="comment">//INLINED FUNCTIONS:</span>
<a name="l00787"></a>00787  
<a name="l00790"></a>00790 
<a name="l00791"></a>00791  <span class="keywordtype">bool</span> <span class="keyword">inline</span> passed_through
<a name="l00792"></a><a class="code" href="classdve__explicit__system__t.html#d70ef91f063f2afe11c837b79625c358">00792</a>     (<span class="keyword">const</span> <a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state, <span class="keyword">const</span> <a class="code" href="classdve__transition__t.html" title="Class representing a transition.">dve_transition_t</a> * <span class="keyword">const</span> t,
<a name="l00793"></a>00793      <span class="keyword">const</span> <a class="code" href="dve__explicit__system_8hh.html#4d0ea24310be557ea785d5cc0dec09b2">dve_state_int_t</a> state1, <span class="keywordtype">bool</span> &amp; eval_err)
<a name="l00794"></a>00794  {
<a name="l00795"></a>00795   DEB(cerr &lt;&lt; <a class="code" href="dve__explicit__system_8hh.html#4d0ea24310be557ea785d5cc0dec09b2">dve_state_int_t</a>(t-&gt;<a class="code" href="classdve__transition__t.html#7decd389606381077f0dfc219545062e" title="Returns a LID of first (starting) state of a transition.">get_state1_lid</a>()) &lt;&lt; <span class="stringliteral">"?=?"</span> &lt;&lt; state1 &lt;&lt; <span class="stringliteral">" and "</span>)
<a name="l00796"></a>00796   DEB(     &lt;&lt; <span class="stringliteral">"guard pointer = "</span> &lt;&lt; <span class="keywordtype">int</span>(t-&gt;<a class="code" href="classdve__transition__t.html#75f54dfe72aae50eb53fc41abdaa610b" title="Returns a guard of this transition.">get_guard</a>()) &lt;&lt; endl;)
<a name="l00797"></a>00797   <span class="keywordflow">if</span> ((<a class="code" href="dve__explicit__system_8hh.html#4d0ea24310be557ea785d5cc0dec09b2">dve_state_int_t</a>(t-&gt;<a class="code" href="classdve__transition__t.html#7decd389606381077f0dfc219545062e" title="Returns a LID of first (starting) state of a transition.">get_state1_lid</a>()) == state1) &amp;&amp;
<a name="l00798"></a>00798       (t-&gt;<a class="code" href="classdve__transition__t.html#75f54dfe72aae50eb53fc41abdaa610b" title="Returns a guard of this transition.">get_guard</a>() == 0 || eval_expr(t-&gt;<a class="code" href="classdve__transition__t.html#75f54dfe72aae50eb53fc41abdaa610b" title="Returns a guard of this transition.">get_guard</a>(),state,eval_err)))
<a name="l00799"></a>00799     { DEB(cerr &lt;&lt; <span class="stringliteral">"Passed through"</span> &lt;&lt; endl;) <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l00800"></a>00800   <span class="keywordflow">else</span>
<a name="l00801"></a>00801     <span class="keywordflow">if</span> (eval_err) <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">//erroneous transitions automatically pass</span>
<a name="l00802"></a>00802     <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00803"></a>00803  }
<a name="l00804"></a>00804  
<a name="l00806"></a><a class="code" href="classdve__explicit__system__t.html#71b24aa0260ad6a0909a362b999b500d">00806</a>  <span class="keywordtype">void</span> prepare_channels_info()
<a name="l00807"></a>00807  {
<a name="l00808"></a>00808   <span class="keywordflow">for</span> (size_int_t i = 0; i!=get_channel_count(); ++i)
<a name="l00809"></a>00809     { channels[i].count = 0; channels[i].error = <span class="keyword">false</span>; }
<a name="l00810"></a>00810  }
<a name="l00811"></a>00811  
<a name="l00813"></a><a class="code" href="classdve__explicit__system__t.html#3f17343a33dd82011175988b5b54f09d">00813</a>  <span class="keywordtype">bool</span> is_commited(<a class="code" href="structstate__t.html" title="Structure representing the state of the system.">state_t</a> state)
<a name="l00814"></a>00814  {
<a name="l00815"></a>00815   <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;
<a name="l00816"></a>00816   <span class="keywordflow">for</span> (size_int_t i = 0; i!=processes.size() &amp;&amp; !result; ++i)
<a name="l00817"></a>00817     <span class="keywordflow">if</span> (processes[i]-&gt;get_commited(get_state_of_process(state,i)))
<a name="l00818"></a>00818       result = <span class="keyword">true</span>;
<a name="l00819"></a>00819   <span class="keywordflow">return</span> result;
<a name="l00820"></a>00820  }
<a name="l00821"></a>00821  
<a name="l00822"></a>00822  all_values_t retype(dve_var_type_t type, all_values_t value)
<a name="l00823"></a>00823  {
<a name="l00824"></a>00824   <span class="keywordflow">switch</span> (type)
<a name="l00825"></a>00825    {
<a name="l00826"></a>00826     <span class="keywordflow">case</span> VAR_BYTE: <span class="keywordflow">return</span> byte_t(value); <span class="keywordflow">break</span>;
<a name="l00827"></a>00827     <span class="keywordflow">case</span> VAR_INT: <span class="keywordflow">return</span> sshort_int_t(value); <span class="keywordflow">break</span>;
<a name="l00828"></a>00828     <span class="keywordflow">default</span>: <a class="code" href="error_8hh.html#0dc53778a7848e90e519edb70273ebf6" title="Global error vector `gerr&amp;#39;.">gerr</a> &lt;&lt; <span class="stringliteral">"Unexpected error: dve_explicit_system_t::retype: "</span>
<a name="l00829"></a>00829                      <span class="stringliteral">"unknown type"</span> &lt;&lt; <a class="code" href="structthr.html" title="Structure determined for causing storing/printing error messages.">thr</a>(); <span class="keywordflow">return</span> 0; <span class="keywordflow">break</span>;
<a name="l00830"></a>00830    };
<a name="l00831"></a>00831  }
<a name="l00832"></a>00832 }; <span class="comment">//END of class dve_explicit_system_t</span>
<a name="l00833"></a>00833 
<a name="l00834"></a>00834 
<a name="l00835"></a>00835 
<a name="l00836"></a>00836 <span class="preprocessor">#ifndef DOXYGEN_PROCESSING  </span>
<a name="l00837"></a>00837 <span class="preprocessor"></span>} <span class="comment">//END of namespace DVE</span>
<a name="l00838"></a>00838 <span class="preprocessor">#include "common/undeb.hh"</span>
<a name="l00839"></a>00839 
<a name="l00840"></a>00840 <span class="preprocessor">#endif //DOXYGEN_PROCESSING</span>
<a name="l00841"></a>00841 <span class="preprocessor"></span>
<a name="l00842"></a>00842 <span class="preprocessor">#endif</span>
</pre></div></div>

<hr size="1"><small><img align="center" src="divine_mini.gif"><b> Reference Manual for Library, 2006 developed in <a href="http://www.fi.muni.cz/paradise/">ParaDiSe</a> laboratory, <a href="http://www.fi.muni.cz/">Faculty of Informatics</a>, <a href="http://www.muni.cz/">Masaryk University</a></b></small>
</body>
</html>


