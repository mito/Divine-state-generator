<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>DiVinE: array_of_abstract.hh Source File</title>
<link href="main.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
<h1>array_of_abstract.hh</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef DIVINE_ARRAY_OF_ABSTRACT_HH</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define DIVINE_ARRAY_OF_ABSTRACT_HH</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00013"></a>00013 <span class="preprocessor">#ifndef DOXYGEN_PROCESSING</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include "<a class="code" href="error_8hh.html">common/error.hh</a>"</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include "common/types.hh"</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include "common/deb.hh"</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="keyword">namespace </span>divine { <span class="comment">//We want Doxygen not to see namespace `dve'</span>
<a name="l00020"></a>00020 <span class="keyword">using</span> std::cerr; <span class="keyword">using</span> std::endl;
<a name="l00021"></a>00021 <span class="preprocessor">#endif //DOXYGEN_PROCESSING</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> ArrayIterator&gt;
<a name="l00024"></a>00024 <span class="keyword">class </span>array_of_abstract_iterator_t
<a name="l00025"></a>00025 {
<a name="l00026"></a>00026  <span class="keyword">private</span>:
<a name="l00027"></a>00027  ArrayIterator p_item;
<a name="l00028"></a>00028  <span class="keyword">public</span>:
<a name="l00029"></a>00029  array_of_abstract_iterator_t&lt;T,ArrayIterator&gt;() { p_item=0; }
<a name="l00030"></a>00030  array_of_abstract_iterator_t&lt;T,ArrayIterator&gt;
<a name="l00031"></a>00031                           (<span class="keyword">const</span> array_of_abstract_iterator_t &amp; second)
<a name="l00032"></a>00032  { p_item=second.p_item; }
<a name="l00033"></a>00033  array_of_abstract_iterator_t&lt;T,ArrayIterator&gt;(<span class="keyword">const</span> ArrayIterator iter)
<a name="l00034"></a>00034  { p_item=iter; }
<a name="l00035"></a>00035  T &amp; operator*() { <span class="keywordflow">return</span> (**p_item); }
<a name="l00036"></a>00036  T * operator-&gt;() { <span class="keywordflow">return</span> (*p_item); }
<a name="l00037"></a>00037  array_of_abstract_iterator_t&lt;T,ArrayIterator&gt; operator+(<span class="keyword">const</span> <span class="keywordtype">int</span> i)
<a name="l00038"></a>00038  { <span class="keywordflow">return</span> array_of_abstract_iterator_t(p_item+i); }
<a name="l00039"></a>00039  array_of_abstract_iterator_t&lt;T,ArrayIterator&gt; operator-(<span class="keyword">const</span> <span class="keywordtype">int</span> i)
<a name="l00040"></a>00040  { <span class="keywordflow">return</span> array_of_abstract_iterator_t(p_item-i); }
<a name="l00041"></a>00041  array_of_abstract_iterator_t&lt;T,ArrayIterator&gt; operator++()
<a name="l00042"></a>00042  { p_item = p_item + 1; <span class="keywordflow">return</span> (*<span class="keyword">this</span>); }
<a name="l00043"></a>00043  array_of_abstract_iterator_t&lt;T,ArrayIterator&gt; operator--()
<a name="l00044"></a>00044  { p_item = p_item - 1; <span class="keywordflow">return</span> (*<span class="keyword">this</span>); }
<a name="l00045"></a>00045  array_of_abstract_iterator_t&lt;T,ArrayIterator&gt; operator++(<span class="keywordtype">int</span>)
<a name="l00046"></a>00046  { array_of_abstract_iterator_t&lt;T,ArrayIterator&gt; copy = (*this);
<a name="l00047"></a>00047    p_item = p_item + 1; <span class="keywordflow">return</span> copy; }
<a name="l00048"></a>00048  array_of_abstract_iterator_t&lt;T,ArrayIterator&gt; operator--(<span class="keywordtype">int</span>)
<a name="l00049"></a>00049  { array_of_abstract_iterator_t&lt;T,ArrayIterator&gt; copy = (*this);
<a name="l00050"></a>00050    p_item = p_item - 1; <span class="keywordflow">return</span> copy; }
<a name="l00051"></a>00051  <span class="keywordtype">bool</span> <a class="code" href="explicit__storage_8hh.html#377d9db1851f76a6b7216bbb2e1d2950" title="Operator for equality of references.">operator==</a>(<span class="keyword">const</span> array_of_abstract_iterator_t second)
<a name="l00052"></a>00052  { <span class="keywordflow">return</span> (this-&gt;p_item==second.p_item); }
<a name="l00053"></a>00053  <span class="keywordtype">bool</span> <a class="code" href="explicit__storage_8hh.html#85eb148798f28ba965ce6fd60a6d1ffc" title="Operator for non-equality of references.">operator!=</a>(<span class="keyword">const</span> array_of_abstract_iterator_t second)
<a name="l00054"></a>00054  { <span class="keywordflow">return</span> (this-&gt;p_item!=second.p_item); }
<a name="l00055"></a>00055 };
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 
<a name="l00059"></a>00059 
<a name="l00078"></a>00078 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, T* (*SingleAlloc)(const <span class="keywordtype">void</span> * params) &gt;
<a name="l00079"></a><a class="code" href="classarray__of__abstract__t.html">00079</a> <span class="keyword">class </span><a class="code" href="classarray__of__abstract__t.html" title="Simple resizable container representing 1-dimensional array.">array_of_abstract_t</a>
<a name="l00080"></a>00080 {
<a name="l00081"></a>00081  <span class="keyword">private</span>:
<a name="l00083"></a>00083   <span class="keyword">const</span> <span class="keywordtype">void</span> * parameters;
<a name="l00084"></a>00084   <a class="code" href="classarray__t.html" title="Simple resizable container representing 1-dimensional array.">array_t&lt;T*&gt;</a> array;
<a name="l00085"></a>00085  <span class="keyword">protected</span>:
<a name="l00087"></a><a class="code" href="classarray__of__abstract__t.html#38b8e939186b88e109d2b33b627451be">00087</a>   T * field;
<a name="l00088"></a>00088  <span class="keyword">public</span>:
<a name="l00090"></a>00090 
<a name="l00092"></a><a class="code" href="classarray__of__abstract__t.html#5aa46cdaa2f3660799f416a09a8b8c3c">00092</a>   <span class="keyword">typedef</span> array_of_abstract_iterator_t&lt;T, T**&gt; <a class="code" href="classarray__of__abstract__t.html#5aa46cdaa2f3660799f416a09a8b8c3c" title="Iterator.">iterator</a>;
<a name="l00094"></a>00094 
<a name="l00097"></a><a class="code" href="classarray__of__abstract__t.html#e86e17705cb24a6baab1bd7185e26810">00097</a>   <span class="keyword">typedef</span> array_of_abstract_iterator_t&lt;T, const T**&gt; <a class="code" href="classarray__of__abstract__t.html#e86e17705cb24a6baab1bd7185e26810" title="Constant iterator.">const_iterator</a>;
<a name="l00099"></a>00099 
<a name="l00100"></a><a class="code" href="classarray__of__abstract__t.html#d69bd11391be1a1dba5c8202259664f8">00100</a>   <a class="code" href="classarray__of__abstract__t.html#5aa46cdaa2f3660799f416a09a8b8c3c" title="Iterator.">iterator</a> begin() { <span class="keywordflow">return</span> <a class="code" href="classarray__of__abstract__t.html#5aa46cdaa2f3660799f416a09a8b8c3c" title="Iterator.">iterator</a>(array.begin()); }
<a name="l00103"></a>00103 
<a name="l00104"></a><a class="code" href="classarray__of__abstract__t.html#cad38d52497a975bfb6f2f6acd76631f">00104</a>   <a class="code" href="classarray__of__abstract__t.html#5aa46cdaa2f3660799f416a09a8b8c3c" title="Iterator.">iterator</a> end() { <span class="keywordflow">return</span> <a class="code" href="classarray__of__abstract__t.html#5aa46cdaa2f3660799f416a09a8b8c3c" title="Iterator.">iterator</a>(array.end()); }
<a name="l00106"></a>00106 
<a name="l00107"></a><a class="code" href="classarray__of__abstract__t.html#4f73d0c8e4ea8066dbc54a6a63330252">00107</a>   <a class="code" href="classarray__of__abstract__t.html#5aa46cdaa2f3660799f416a09a8b8c3c" title="Iterator.">iterator</a> last() { <span class="keywordflow">return</span> <a class="code" href="classarray__of__abstract__t.html#5aa46cdaa2f3660799f416a09a8b8c3c" title="Iterator.">iterator</a>(array.last()); }
<a name="l00109"></a>00109 
<a name="l00110"></a><a class="code" href="classarray__of__abstract__t.html#a4b02d4f1a8500fb07a551069060709f">00110</a>   <a class="code" href="classarray__of__abstract__t.html#e86e17705cb24a6baab1bd7185e26810" title="Constant iterator.">const_iterator</a> begin()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classarray__of__abstract__t.html#e86e17705cb24a6baab1bd7185e26810" title="Constant iterator.">const_iterator</a>(array.begin()); }
<a name="l00113"></a>00113 
<a name="l00114"></a><a class="code" href="classarray__of__abstract__t.html#350132543d80a1c1e5be844e6d2878ea">00114</a>   <a class="code" href="classarray__of__abstract__t.html#e86e17705cb24a6baab1bd7185e26810" title="Constant iterator.">const_iterator</a> end()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classarray__of__abstract__t.html#e86e17705cb24a6baab1bd7185e26810" title="Constant iterator.">const_iterator</a>(array.end()); }
<a name="l00116"></a>00116 
<a name="l00117"></a><a class="code" href="classarray__of__abstract__t.html#bb8e6ce01e2629c199ffc9405bba2a7c">00117</a>   <a class="code" href="classarray__of__abstract__t.html#e86e17705cb24a6baab1bd7185e26810" title="Constant iterator.">const_iterator</a> last()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classarray__of__abstract__t.html#e86e17705cb24a6baab1bd7185e26810" title="Constant iterator.">const_iterator</a>(array.last()); }
<a name="l00119"></a>00119 
<a name="l00123"></a><a class="code" href="classarray__of__abstract__t.html#c1d9e4dd1b810f8aae70fb58ec6d7e86">00123</a>   <span class="keywordtype">void</span> assign_from(<span class="keyword">const</span> <a class="code" href="classarray__of__abstract__t.html" title="Simple resizable container representing 1-dimensional array.">array_of_abstract_t&lt;T, SingleAlloc&gt;</a> &amp; to_copy)
<a name="l00124"></a>00124    {
<a name="l00125"></a>00125     resize(to_copy.<a class="code" href="classarray__of__abstract__t.html#d1adfbe081c17b0e76a69b96d259c53b">array</a>.<a class="code" href="classarray__t.html#2216cf611d64e85907f4a64977f251e1" title="Returns a count of items stored in a container.">size</a>());
<a name="l00126"></a>00126     <span class="keywordflow">for</span> (size_int_t i=0; i!=array.size(); ++i)
<a name="l00127"></a>00127       (*array[i]) = (*to_copy.<a class="code" href="classarray__of__abstract__t.html#d1adfbe081c17b0e76a69b96d259c53b">array</a>[i]);
<a name="l00128"></a>00128    }
<a name="l00131"></a>00131   <span class="comment">/* \param allocate = the number of items to pre-alllocate</span>
<a name="l00132"></a>00132 <span class="comment">   * \param step = the step of allocation in case of extending the container</span>
<a name="l00133"></a>00133 <span class="comment">   */</span>
<a name="l00134"></a><a class="code" href="classarray__of__abstract__t.html#b71185cf968c22dd49a6701f83278c0f">00134</a>   <a class="code" href="classarray__of__abstract__t.html" title="Simple resizable container representing 1-dimensional array.">array_of_abstract_t</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> * params,
<a name="l00135"></a>00135                                size_int_t allocate = 2, size_int_t step = 2):
<a name="l00136"></a>00136      parameters(params), array(allocate, step)
<a name="l00137"></a>00137    { <span class="keywordflow">for</span> (size_int_t i=0; i!=array.get_allocated(); ++i)
<a name="l00138"></a>00138        array[i] = SingleAlloc(parameters); }
<a name="l00140"></a>00140   <span class="comment">/* It is implemented using assign_from() method, therefor it takes</span>
<a name="l00141"></a>00141 <span class="comment">   * both time and memory &lt;i&gt;O(n)&lt;/i&gt;, where &lt;i&gt;n&lt;/i&gt; is</span>
<a name="l00142"></a>00142 <span class="comment">   * a number of items in \a to_copy instance of the container.*/</span>
<a name="l00143"></a>00143   <a class="code" href="classarray__of__abstract__t.html" title="Simple resizable container representing 1-dimensional array.">array_of_abstract_t</a>
<a name="l00144"></a><a class="code" href="classarray__of__abstract__t.html#f64652ebac0b3b149875a07daca4c74a">00144</a>        (<span class="keyword">const</span> <a class="code" href="classarray__of__abstract__t.html" title="Simple resizable container representing 1-dimensional array.">array_of_abstract_t&lt;T, SingleAlloc&gt;</a> &amp; to_copy)
<a name="l00145"></a>00145   { assign_from(to_copy); }
<a name="l00147"></a><a class="code" href="classarray__of__abstract__t.html#641760a6a638362e22696a04778a9b23">00147</a>   ~<a class="code" href="classarray__of__abstract__t.html" title="Simple resizable container representing 1-dimensional array.">array_of_abstract_t</a>()
<a name="l00148"></a>00148   { <span class="keywordflow">for</span> (size_int_t i=0; i!=array.get_allocated(); ++i) <span class="keyword">delete</span> array[i]; }
<a name="l00150"></a>00150 
<a name="l00154"></a><a class="code" href="classarray__of__abstract__t.html#6ca947f3c87573111ff4a96a97042477">00154</a>   <span class="keywordtype">void</span> push_back(T what)
<a name="l00155"></a>00155    {
<a name="l00156"></a>00156     extend(1);
<a name="l00157"></a>00157     (*array.back())=what;
<a name="l00158"></a>00158    }
<a name="l00160"></a>00160 
<a name="l00164"></a><a class="code" href="classarray__of__abstract__t.html#73649441c9e19846aa9da9a2b214e03e">00164</a>   T pop_back()
<a name="l00165"></a>00165    { T result = (*array[array.size()]);
<a name="l00166"></a>00166      shrink_to(array.size()-1);
<a name="l00167"></a>00167      <span class="keywordflow">return</span> result; }
<a name="l00169"></a>00169 
<a name="l00174"></a><a class="code" href="classarray__of__abstract__t.html#9821feac13831e832c3447a3a333a9f9">00174</a>   <span class="keywordtype">void</span> resize(<span class="keyword">const</span> size_int_t count)
<a name="l00175"></a>00175    {
<a name="l00176"></a>00176     <span class="keyword">const</span> size_int_t initial_allocated = array.get_allocated();
<a name="l00177"></a>00177     array.resize(count);
<a name="l00178"></a>00178     <span class="keyword">const</span> size_int_t currently_allocated = array.get_allocated();
<a name="l00179"></a>00179     <span class="keywordflow">for</span> (size_int_t i=initial_allocated; i&lt;currently_allocated; ++i)
<a name="l00180"></a>00180       array[i]=SingleAlloc(parameters);
<a name="l00181"></a>00181    }
<a name="l00183"></a>00183 
<a name="l00187"></a><a class="code" href="classarray__of__abstract__t.html#d0e444e6c65888495eec136774166dc7">00187</a>   <span class="keywordtype">void</span> shrink_to(<span class="keyword">const</span> size_int_t count)
<a name="l00188"></a>00188   { array.shrink_to(count); }
<a name="l00190"></a>00190 
<a name="l00195"></a><a class="code" href="classarray__of__abstract__t.html#c88da080a0faf84f35473285eed38b26">00195</a>   <span class="keywordtype">void</span> extend_to(<span class="keyword">const</span> size_int_t count)
<a name="l00196"></a>00196   { extend(count-array.size()); }
<a name="l00198"></a>00198 
<a name="l00202"></a><a class="code" href="classarray__of__abstract__t.html#6100ef16bd8c2b2446f7d8922e6d8257">00202</a>   <span class="keywordtype">void</span> extend(<span class="keyword">const</span> size_int_t count)
<a name="l00203"></a>00203    {
<a name="l00204"></a>00204     <span class="keyword">const</span> size_int_t initial_allocated = array.get_allocated();
<a name="l00205"></a>00205     array.extend(count);
<a name="l00206"></a>00206     <span class="keyword">const</span> size_int_t currently_allocated = array.get_allocated();
<a name="l00207"></a>00207     <span class="keywordflow">for</span> (size_int_t i=initial_allocated; i&lt;currently_allocated; ++i)
<a name="l00208"></a>00208       array[i]=SingleAlloc(parameters);
<a name="l00209"></a>00209    }
<a name="l00211"></a><a class="code" href="classarray__of__abstract__t.html#2216cf611d64e85907f4a64977f251e1">00211</a>   size_int_t size()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> array.size(); }
<a name="l00213"></a>00213 
<a name="l00215"></a><a class="code" href="classarray__of__abstract__t.html#4fd2c8aafffc98cd5cd8be9edb49790d">00215</a>   size_int_t get_allocated()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> array.get_allocated(); }
<a name="l00217"></a>00217 
<a name="l00220"></a><a class="code" href="classarray__of__abstract__t.html#58a09d8ac91970e7eec713b6dcbd42f7">00220</a>   size_int_t get_alloc_step()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> array.get_alloc_step(); }
<a name="l00222"></a>00222 
<a name="l00225"></a><a class="code" href="classarray__of__abstract__t.html#643855ce67fbf1d69755427f63acc2bf">00225</a>   <span class="keywordtype">void</span> set_alloc_step(<span class="keyword">const</span> size_int_t new_alloc_step)
<a name="l00226"></a>00226     { array.set_alloc_step(new_alloc_step); }
<a name="l00228"></a><a class="code" href="classarray__of__abstract__t.html#55d9a449187445866021859f0cf708d0">00228</a>   T &amp; front() { <span class="keywordflow">return</span> (*array.front()); }
<a name="l00230"></a><a class="code" href="classarray__of__abstract__t.html#33144bdb055f125014515b05fffaea8e">00230</a>   <span class="keyword">const</span> T &amp; front()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (*array.front()); }
<a name="l00232"></a><a class="code" href="classarray__of__abstract__t.html#94c484819f66b605343298653d4b1d07">00232</a>   T &amp; back() { <span class="keywordflow">return</span> (*array.back()); }
<a name="l00234"></a><a class="code" href="classarray__of__abstract__t.html#66ff8d365d8820194730f759978dc1d0">00234</a>   <span class="keyword">const</span> T &amp; back()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (*array.back()); }
<a name="l00236"></a><a class="code" href="classarray__of__abstract__t.html#207facaaa8c14c461113bd03ad23703b">00236</a>   T &amp; operator[](<span class="keyword">const</span> size_int_t i)
<a name="l00237"></a>00237   { <span class="keywordflow">return</span> (*array[i]); }
<a name="l00239"></a><a class="code" href="classarray__of__abstract__t.html#3c1a01cf6c60eac71bce2f4352d0f860">00239</a>   <span class="keyword">const</span> T &amp; operator[](<span class="keyword">const</span> size_int_t i)<span class="keyword"> const</span>
<a name="l00240"></a>00240 <span class="keyword">  </span>{ <span class="keywordflow">return</span> (*array[i]); }
<a name="l00242"></a>00242 
<a name="l00246"></a><a class="code" href="classarray__of__abstract__t.html#b97084daebb64f2f5cd35dff73316fb2">00246</a>   <span class="keywordtype">void</span> swap(<a class="code" href="classarray__of__abstract__t.html" title="Simple resizable container representing 1-dimensional array.">array_of_abstract_t&lt;T, SingleAlloc&gt;</a> &amp; second)
<a name="l00247"></a>00247    { array.swap(second.<a class="code" href="classarray__of__abstract__t.html#d1adfbe081c17b0e76a69b96d259c53b">array</a>); }
<a name="l00249"></a>00249 
<a name="l00251"></a><a class="code" href="classarray__of__abstract__t.html#c8bb3912a3ce86b15842e79d0b421204">00251</a>   <span class="keywordtype">void</span> clear() { array.clear(); }
<a name="l00252"></a>00252 };
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 <span class="preprocessor">#ifndef DOXYGEN_PROCESSING</span>
<a name="l00256"></a>00256 <span class="preprocessor"></span>} <span class="comment">//end of namespace</span>
<a name="l00257"></a>00257 <span class="preprocessor">#include "common/undeb.hh"</span>
<a name="l00258"></a>00258 
<a name="l00259"></a>00259 <span class="preprocessor">#endif //DOXYGEN_PROCESSING</span>
<a name="l00260"></a>00260 <span class="preprocessor"></span>
<a name="l00261"></a>00261 <span class="preprocessor">#endif</span>
<a name="l00262"></a>00262 <span class="preprocessor"></span>
</pre></div></div>

<hr size="1"><small><img align="center" src="divine_mini.gif"><b> Reference Manual for Library, 2006 developed in <a href="http://www.fi.muni.cz/paradise/">ParaDiSe</a> laboratory, <a href="http://www.fi.muni.cz/">Faculty of Informatics</a>, <a href="http://www.muni.cz/">Masaryk University</a></b></small>
</body>
</html>


